# todo-cli

## 概要

コマンドラインで動作する TODO 管理アプリケーション。タスクの追加、削除、一覧表示、完了マークなどの基本機能を提供する。実用的なアプリケーションを通じて、IO モナドやファイル操作、コマンドライン引数のパースなど、Haskell の実践的な側面を学ぶことができる。

## 実装する機能

- タスクの追加
- タスクの一覧表示
- タスクの削除
- タスクの完了/未完了の切り替え
- データの永続化 (ファイルへの保存と読み込み)

## 学習目標

このプロジェクトを通じて学ぶ Haskell の概念やテクニック:

### 言語機能
- **IO モナド**: ファイル IO やコンソール入出力など、副作用を伴う処理の扱い方
- **代数的データ型**: TODO アイテムやコマンドを表現するための型設計
- **パターンマッチ**: コマンドの種類に応じた処理の分岐
- **Maybe/Either 型**: エラーハンドリングとオプショナルな値の扱い

### 型システムの活用
- **newtype**: ID や文字列などのプリミティブ型をラップして型安全性を高める
- **型クラス**: Show, Read などを活用したシリアライゼーション
- **カスタム型クラス**: 独自の型クラスを定義して抽象化を行う

### 推奨ライブラリ
- **optparse-applicative**: コマンドライン引数のパース
- **aeson**: JSON 形式でのデータ保存 (より高度な永続化)
- **bytestring/text**: 効率的な文字列処理
- **directory/filepath**: ファイルシステム操作

### テストの書き方
- **Hspec**: 振る舞いを記述するテストフレームワーク
- **QuickCheck**: プロパティベースドテスト (より高度なテスト手法)

## 技術的なヒント

### データ設計
- TODO アイテムをどのようなデータ型で表現するか考えてみましょう
  - 最低限必要な情報は何か (タイトル、完了状態など)
  - 追加で持たせたい情報は何か (作成日時、優先度、タグなど)
- コマンドの種類をどう表現するか
  - 追加、削除、一覧表示などの操作を型で表現する方法

### コマンドライン引数のパース
- プログラムへの入力をどう受け取るか
  - サブコマンド方式 (例: `todo add "買い物"`, `todo list`)
  - フラグ方式 (例: `todo --add "買い物"`, `todo --list`)
- optparse-applicative を使うと、型安全かつ宣言的に引数をパースできる
- ヘルプメッセージの自動生成も可能

### データの永続化
- ファイルにどのような形式でデータを保存するか
  - テキスト形式 (各行が 1 つの TODO など)
  - 構造化データ (JSON, YAML など)
- ファイルの読み書きをどう扱うか
  - ファイルが存在しない場合の処理
  - パースに失敗した場合の処理

### エラーハンドリング
- 発生しうるエラーケースを洗い出す
  - ファイルが読めない
  - データのパースに失敗
  - 存在しない ID のタスクを削除しようとした
- Maybe や Either を使った安全なエラーハンドリング
- ユーザーにわかりやすいエラーメッセージの提供

### 実装の進め方
1. まずはデータ型の設計から始める
2. コマンドライン引数のパースを実装 (最初は単純な入力でも良い)
3. メモリ上でのタスク管理を実装
4. ファイル IO を追加して永続化を実現
5. エラーハンドリングを洗練させる
6. テストを追加して品質を高める

## 参考資料

- [Haskell Tutorial - Input and Output](https://www.haskell.org/tutorial/io.html): IO モナドの基本
- [Learn You a Haskell - Input and Output](http://learnyouahaskell.com/input-and-output): IO の実践的な使い方
- Context7 で optparse-applicative の最新ドキュメントを参照できます
